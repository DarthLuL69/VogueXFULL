<div class="product-search">
  <div class="search-container">
    <input
      type="text"
      [(ngModel)]="searchQuery"
      (ngModelChange)="onSearchChange($event)"
      placeholder="Buscar producto..."
      class="search-input"
      [class.loading]="loading"
    />
    
    <div *ngIf="loading" class="loading-spinner">
      <div class="spinner"></div>
    </div>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="suggestions.length > 0" class="suggestions-list">
    <div
      *ngFor="let product of suggestions"
      (click)="onProductSelect(product)"
      class="suggestion-item"
    >
      <img [src]="product.thumbnail" [alt]="product.name" class="product-thumbnail">
      <div class="product-info">
        <h4>{{ product.name }}</h4>
        <p>{{ product.brand }}</p>
      </div>
    </div>
  </div>

  <div *ngIf="priceRecommendation" class="price-recommendation">
    <h3>Recomendación de Precio</h3>
    <div class="recommended-price">
      ${{ priceRecommendation.recommended_price }}
    </div>
    <p class="explanation">
      {{ priceRecommendation.explanation }}
    </p>
    <div class="market-data">
      <div class="market-data-item">
        <span>Última venta:</span>
        <span>${{ priceRecommendation.market_data.last_sale }}</span>
      </div>
      <div class="market-data-item">
        <span>Precio más bajo:</span>
        <span>${{ priceRecommendation.market_data.lowest_ask }}</span>
      </div>
      <div class="market-data-item">
        <span>Oferta más alta:</span>
        <span>${{ priceRecommendation.market_data.highest_bid }}</span>
      </div>
      <div class="market-data-item">
        <span>Precio promedio:</span>
        <span>${{ priceRecommendation.market_data.average_price }}</span>
      </div>
    </div>
  </div>
</div> 